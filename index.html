<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>alpha</title>
<style>
html,body{
margin:0;
padding:0;
width:100%;
height:100%;
background:#0f0f0f;
overflow:hidden;
transition:background 2s
}
#entity{
width:12px;
height:12px;
background:#dcdcdc;
position:absolute;
left:50%;
top:50%;
transform:translate(-50%,-50%);
transition:background 1s
}
#presence{
position:absolute;
width:12px;
height:12px;
background:#000;
opacity:0;
pointer-events:none;
transition:opacity 3s
}
#whisper{
position:absolute;
bottom:30px;
width:100%;
text-align:center;
color:#888;
font-family:monospace;
font-size:12px;
opacity:0;
transition:opacity 4s
}
</style>
</head>
<body>

<div id="entity"></div>
<div id="presence"></div>
<div id="whisper"></div>

<script>
const e=document.getElementById("entity")
const p=document.getElementById("presence")
const w=document.getElementById("whisper")

let x=innerWidth/2
let y=innerHeight/2
let vx=0
let vy=0

let activity=0
let stillness=0
let awareness=0
let ended=false

let keys={}
addEventListener("keydown",k=>keys[k.key]=true)
addEventListener("keyup",k=>keys[k.key]=false)

function loop(){
if(ended)return

let moving=false

if(keys["w"]){vy-=0.35;moving=true}
if(keys["s"]){vy+=0.35;moving=true}
if(keys["a"]){vx-=0.35;moving=true}
if(keys["d"]){vx+=0.35;moving=true}

vx*=0.9
vy*=0.9

x+=vx
y+=vy

e.style.left=x+"px"
e.style.top=y+"px"

if(moving){
activity++
stillness=0
}else{
stillness++
}

if(activity>600){
document.body.style.background="#0b0b0b"
awareness++
}

if(stillness>400){
p.style.opacity=0.15
p.style.left=(x+Math.sin(stillness*0.02)*40)+"px"
p.style.top=(y+Math.cos(stillness*0.02)*40)+"px"
awareness++
}

if(awareness>200){
w.style.opacity=1
w.innerText="ya lo notaste"
}

if(awareness>400){
e.style.background="#bdbdbd"
}

if(awareness>650){
end()
}

requestAnimationFrame(loop)
}

function end(){
ended=true
document.body.style.background="#000"
e.style.opacity=0
p.style.opacity=0
w.innerText="fin de la observaci√≥n"
w.style.opacity=1
}

loop()
</script>

</body>
</html>

