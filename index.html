<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Recolecta</title>
<style>
html,body{
margin:0;
padding:0;
width:100%;
height:100%;
background:#111;
color:#fff;
font-family:monospace;
overflow:hidden
}
#ui{
position:absolute;
top:10px;
left:10px;
font-size:14px
}
#player{
width:20px;
height:20px;
background:#4caf50;
position:absolute;
left:50%;
top:50%;
transform:translate(-50%,-50%)
}
.orb{
width:10px;
height:10px;
background:#fff;
border-radius:50%;
position:absolute
}
</style>
</head>
<body>

<div id="ui">
Puntos: <span id="score">0</span><br>
Mu√©vete con WASD
</div>
<div id="player"></div>

<script>
const player=document.getElementById("player")
const scoreEl=document.getElementById("score")
const ui=document.getElementById("ui")

let px=innerWidth/2
let py=innerHeight/2
let speed=4
let score=0
let keys={}
let orbs=[]
let startTime=Date.now()
let phase="normal"

document.addEventListener("keydown",e=>keys[e.key]=true)
document.addEventListener("keyup",e=>keys[e.key]=false)

function spawnOrb(){
let o=document.createElement("div")
o.className="orb"
o.style.left=Math.random()*(innerWidth-20)+"px"
o.style.top=Math.random()*(innerHeight-20)+"px"
document.body.appendChild(o)
orbs.push(o)
}

for(let i=0;i<8;i++)spawnOrb()

function collide(a,b){
let r1=a.getBoundingClientRect()
let r2=b.getBoundingClientRect()
return !(r1.right<r2.left||r1.left>r2.right||r1.bottom<r2.top||r1.top>r2.bottom)
}

function update(){
if(keys["w"])py-=speed
if(keys["s"])py+=speed
if(keys["a"])px-=speed
if(keys["d"])px+=speed

player.style.left=px+"px"
player.style.top=py+"px"

orbs.forEach((o,i)=>{
if(collide(player,o)){
o.remove()
orbs.splice(i,1)
score++
scoreEl.innerText=score
spawnOrb()
}
})

let elapsed=(Date.now()-startTime)/1000

if(elapsed>300 && phase==="normal"){
phase="shift"
ui.innerHTML="Puntos: "+score
document.body.style.background="#0e0e0e"
}

if(phase==="shift"){
if(Math.random()<0.005){
ui.innerHTML="Puntos: "+score+"<br>"
}
if(Math.random()<0.002){
document.body.style.background=
"#"+Math.floor(Math.random()*111111)
}
}

requestAnimationFrame(update)
}

update()
</script>

</body>
</html>

